{
"version":3,
"file":"stdlib/index.js",
"lineCount":123,
"mappings":"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",
"sources":["node_modules/erte/src/index.js","node_modules/argufy/src/index.js","src/stdlib.js","node_modules/usually/src/index.js","node_modules/indicatrix/src/index.js"],
"sourcesContent":["import Diff from './diff'\n\nconst colors = {\n  'black': 30,\n  'red': 31,\n  'green': 32,\n  'yellow': 33,\n  'blue': 34,\n  'magenta': 35,\n  'cyan': 36,\n  'white': 37,\n  'grey': 90,\n}\n\nconst backgroundColors = {\n  'black': 40,\n  'red': 41,\n  'green': 42,\n  'yellow': 43,\n  'blue': 44,\n  'magenta': 45,\n  'cyan': 46,\n  'white': 47,\n}\n\n/**\n * Color the foreground.\n * @param {string} string The string to color.\n * @param {_erte.Color} color The color to apply.\n */\nexport function c(string, color) {\n  const cc = colors[color]\n  if (!cc) return string\n  return `\\x1b[${cc}m${string}\\x1b[0m`\n}\n\n/**\n * Color the background.\n * @param {string} string The string to color.\n * @param {_erte.Color} color The color to apply.\n */\nexport function b(string, color) {\n  const cc = backgroundColors[color]\n  if (!cc) return string\n  return `\\x1b[${cc}m${string}\\x1b[0m`\n}\n\n/**\n * Compares two strings and outputs a coloured version where strings don't match.\n * @param {string} source A string to compare.\n * @param {string} target Target string to compare with.\n * @returns {string} A string which uses shell-codes to highligh differences.\n */\nexport default function erte(source, target) {\n  const diff = new Diff()\n  const d = diff.diff(source, target)\n  const m = d.map(({ added, removed, value }) => {\n    let p\n    const s = value.split(' ')\n    if (added) {\n      p = s.map(t => {\n        return t.replace(/\\n$/mg, '\u23ce\\n')\n      }).map(t => c(t, 'green')).join(b(' ', 'green'))\n    } else if (removed) {\n      p = s.map(t => {\n        return t.replace(/\\n$/mg, '\u23ce\\n')\n      }).map(t => c(t, 'red')).join(b(' ', 'red'))\n    } else {\n      p = c(value, 'grey')\n    }\n    return p\n  })\n  const s = m.join('')\n  return s\n}\n\n/* documentary types/index.xml */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_erte.Color} Color The color to apply.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {('black'|'red'|'green'|'yellow'|'blue'|'magenta'|'cyan'|'white'|'grey')} _erte.Color The color to apply.\n */\n","/**\n * @param {Array<string>} argv\n * @param {string} long\n * @param {string} [short]\n * @param {boolean} [bool]\n * @param {boolean} [number]\n */\nconst find = (argv, long, short, bool = false, number = false) => {\n  const re = short ? new RegExp(`^-(${short}|-${long})`)\n    : new RegExp(`^--${long}`)\n  const i = argv.findIndex(a => re.test(a))\n  if (i == -1) return { argv }\n\n  if (bool) {\n    return {\n      value: true,\n      argv: [\n        ...argv.slice(0, i),\n        ...argv.slice(i + 1),\n      ],\n    }\n  }\n\n  const j = i + 1\n  let value = argv[j]\n\n  if (!value || (typeof value == 'string' && value.startsWith('--'))) return { argv }\n\n  if (number) {\n    value = parseInt(value, 10)\n  }\n  return {\n    value,\n    argv: [\n      ...argv.slice(0, i),\n      ...argv.slice(j + 1),\n    ],\n  }\n}\n\n/**\n * Parse the config and extract arguments from the `process.argv` array.\n * @param {!_argufy.Config} config The configuration for parsing, where each key is a flag name and values are either strings, or objects with possible properties:\n *\n * - __short__ Shorthand for this argument, usually one letter.\n * - __boolean__ Does not have to be followed by a value, true if given.\n * - __number__ Parse as a number.\n * - __command__ Whether this argument can be specified as the first argument without the dash, such as `example run`.\n * - __multiple__ Extract multiple commands as an  array when `command` is set to true.\n *\n * @example\n```\nconst config = {\n  title: 't',       // program -t Title\n  open: {           // program -o\n    short: 'o',\n    boolean: true,\n  },\n  delay: {          // program -d 100\n    short: 'd',\n    number: true,\n  },\n  file: {           // program File.txt\n    command: true,\n  },\n  file2: {           // program File.txt File2.txt\n    command: true,\n    multiple: true,\n  },\n}\n```\n * @param {!Array<string>} [args] Array with arguments to parse. `process.argv` is used by default. It is assumed that user arguments start from the 3rd position.\n * @returns {Object<string, string|Array<string>|boolean|number>} An object with all found values for the configuration request.\n */\nexport default function argufy(config = {}, args = process.argv) {\n  let [, , ...argv] = args\n  const titles = findTitles(argv)\n  argv = argv.slice(titles.length)\n  let commandFound = !titles.length\n  const res = Object.keys(config).reduce(({ _argv, ...acc }, key) => {\n    if (_argv.length == 0 && commandFound) return { _argv, ...acc }\n    const val = config[key]\n    let value\n    if (typeof val == 'string') {\n      ({ value, argv: _argv } = find(_argv, key, val))\n    } else {\n      try {\n        const { short, boolean, number, command, multiple } = val\n        if (command && multiple && titles.length) {\n          value = titles\n          commandFound = true\n        } else if (command && titles.length) {\n          value = titles[0]\n          commandFound = true\n        } else {\n          ({ value, argv: _argv } = find(_argv, key, short, boolean, number))\n        }\n      } catch (err) {\n        return { _argv, ...acc }\n      }\n    }\n    if (value === undefined) return { _argv, ...acc }\n    const r = { _argv, ...acc, [key]: value }\n    return r\n  }, {\n    _argv: argv,\n  })\n  return res\n}\n\n/** @param {!Array<string>} argv */\nconst findTitles = argv => {\n  const titles = []\n  for (let i = 0; i < argv.length; i++) {\n    const a = argv[i]\n    if (a.startsWith('-')) break\n    titles.push(a)\n  }\n  return titles\n}\n\n/**\n * Based on the argufy config, creates an object that can be passed to `usually`.\n * @param {!_argufy.Config} argsConfig The configuration for parsing, where each key is a flag name and values are either strings, or objects with possible properties:\n * @example\n```\n{ 'input': 'The input to the program',\n  '--output, -o': 'The output of the program', }\n```\n */\nexport const reduceUsage = (argsConfig) => {\n  const a = Object.keys(argsConfig).reduce((acc, key) => {\n    const val = argsConfig[key]\n    if (typeof val == 'string') {\n      const k = `-${val}`\n      acc[k] = ''\n      return acc\n    }\n    let k = val.command ? key : `--${key}`\n    if (val.short) k = `${k}, -${val.short}`\n    let d = val.description\n    if (val.default) d = `${d}\\nDefault: ${val.default}.`\n    acc[k] = d\n    return acc\n  }, {})\n  return a\n}\n\n/* documentary types/index.xml */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_argufy.Config} Config The configuration for parsing, where each key is a flag name and values are either strings, or objects with possible properties:\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {Object<string, string|!_argufy.Flag>} _argufy.Config The configuration for parsing, where each key is a flag name and values are either strings, or objects with possible properties:\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_argufy.Flag} Flag The flag passed to the program.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {Object} _argufy.Flag The flag passed to the program.\n * @prop {string} [short] Shorthand for this argument, usually one letter.\n * @prop {boolean} [boolean=false] Whether the flag is a boolean and does not require a value. Default `false`.\n * @prop {boolean} [number=false] Specifies whether the flag should be parsed as a number. Default `false`.\n * @prop {boolean} [command=false] If set to true, the value is read from the first argument passed to the CLI command (e.g., `$ cli command`). Default `false`.\n * @prop {boolean} [multiple=false] When using the `command` property, will parse the commands as an array. Default `false`.\n * @prop {string} [default] The default value for the argument. Does not actually set the value, only used in reducing the usage info (`argufy` bin on the other hand will set the default).\n * @prop {string} [description] The description to be used by `usually`.\n */\n","import { c } from 'erte'\nimport argufy, { reduceUsage } from 'argufy'\nimport usually from 'usually'\nimport indicatrix from 'indicatrix'\n\nmodule.exports = {\n  'c': c,\n  'reduceUsage': reduceUsage,\n  'argufy': argufy,\n  'usually': usually,\n  'indicatrix': indicatrix,\n}","/**\n * Generate a usage string.\n * @param {!_usually.Config} config The configuration object.\n * @param {!Object<string, string>} config.usage The map with possible arguments (flags, options) and their information.\n * @param {string} [config.description] What does the program do?\n * @param {string} [config.line] The summary of the program in one line.\n * @param {string} [config.example] The example of the program usage.\n * @example\n```\nimport usually from 'usually'\n\nconst res = usually({\n  usage: {\n    '-h': 'print help',\n    '-c': 'execute this command',\n  },\n  description: 'A test command-line application',\n  line: 'usually [-c command|command2] [-h]',\n  example: 'usually -c command2',\n})\n// A test command-line application\n//\n//  usually [-c command|command2] [-h]\n//\n//        -h      print help\n//        -c      execute this command\n//\n//  Example:\n//\n//    usually -c command2\n//\n```\n */\nexport default function usually(config = { usage: {} }) {\n  const {\n    usage = {},\n    description,\n    line,\n    example,\n  } = config\n  const commands = Object.keys(usage)\n  const descriptions = Object.values(usage)\n\n  const [commandLength] = commands.reduce(([longestName = 0, longestDescription = 0], name) => {\n    const command = usage[name]\n    const theLongest = command.split('\\n')\n      .reduce((acc, c) => {\n        if (c.length > acc) return c.length\n        return acc\n      }, 0)\n    if (theLongest > longestDescription) longestDescription = theLongest\n    if (name.length > longestName) longestName = name.length\n    return [longestName, longestDescription]\n  }, [])\n\n  const pad = (string, length) => {\n    const l = length - string.length\n    const ts = ' '.repeat(l)\n    const s = `${string}${ts}`\n    return s\n  }\n\n  const usa = commands.reduce((acc, command, i) => {\n    const value = descriptions[i]\n    const vals = value.split('\\n')\n    const c = pad(command, commandLength)\n    const [firstVal, ...otherVals] = vals\n    const firstLine = `${c}\\t${firstVal}`\n    const emptyPad = pad('', commandLength)\n    const otherLines = otherVals.map(val => {\n      const r = `${emptyPad}\\t${val}`\n      return r\n    })\n    const res = [...acc, firstLine, ...otherLines]\n    return res\n  }, [])\n\n  const USA = usa.map(a => `\\t${a}`)\n  const s = [\n    description,\n    `  ${line || ''}`,\n  ].filter(l => l ? l.trim() : l).join('\\n\\n')\n  const u = `${s ? `${s}\\n` : ''}\n${USA.join('\\n')}\n`\n\n\n  if (example) {\n    return `${u}\n  Example:\n\n    ${example}\n`\n  }\n\n  return u\n}\n\n/* documentary types/index.xml */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_usually.Config} Config The configuration object.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {Object} _usually.Config The configuration object.\n * @prop {!Object<string, string>} usage The map with possible arguments (flags, options) and their information.\n * @prop {string} [description] What does the program do?\n * @prop {string} [line] The summary of the program in one line.\n * @prop {string} [example] The example of the program usage.\n */\n","/**\n * Will print the loading text and refresh the CLI line to show the ellipsis while the promise is loading.\n * @param {string} text The text to display in the CLI.\n * @param {!Promise<T>|function(...*): !Promise<T>} promise The promise or an async function that returns the promise.\n * @param {!_indicatrix.Options} [options] The optional options for the indicator, such as the refresh interval.\n * @param {number} [options.interval=250] The interval with which to update the screen. Default `250`.\n * @param {!(NodeJS.WriteStream|stream.Writable)} [options.writable=\"process.stdout\"] The writable stream used for printing data with the `.write` method. Default `process.stdout`.\n * @template T\n */\nexport default async function indicatrix(text, promise, options = {}) {\n  const { interval = 250, writable = process.stdout } = options\n  const p = typeof promise == 'function' ? promise() : promise\n  const write = writable.write.bind(writable)\n\n  const { 'INDICATRIX_PLACEHOLDER': placeholder } = process.env\n  if (placeholder && placeholder != '0') {\n    write(`${text}<INDICATRIX_PLACEHOLDER>`)\n    return await p\n  }\n\n  let i = 1\n  const getText = () => `${text}${'.'.repeat(i)}`\n  const clear = () => write(`\\r${' '.repeat(text.length + 3)}\\r`)\n  let s = getText()\n  write(s)\n  const int = setInterval(() => {\n    i = (i + 1) % 4\n    s = getText()\n    clear()\n    write(s)\n  }, interval)\n  try {\n    const res = await p\n    return res\n  } finally {\n    clearInterval(int)\n    clear()\n  }\n}\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('..').Options} _indicatrix.Options\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('stream').Writable} stream.Writable\n */"],
"names":["colors","find","argv","long","short","bool","number","re","RegExp","i","findIndex","a","test","value","slice","j","startsWith","parseInt","findTitles","titles","length","push","module","exports","c","string","color","cc","argsConfig","reduceUsage","Object","keys","reduce","acc","key","val","k","command","d","description","default","argufy","config","args","process","commandFound","res","_argv","boolean","multiple","err","undefined","r","usually","usage","line","example","commands","descriptions","values","commandLength","longestName","longestDescription","name","theLongest","split","pad","ts","repeat","s","USA","usa","vals","firstVal","otherVals","firstLine","emptyPad","otherLines","map","filter","l","trim","join","u","indicatrix","text","promise","options","interval","writable","stdout","p","write","bind","placeholder","env","int","setInterval","clearInterval"]
}
